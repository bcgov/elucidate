---
output: github_document
always_allow_html: true
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# elucidate <img src='man/figures/hex-elucidate.png' align="right" height="139" />

## Project Status

[![img](https://img.shields.io/badge/Lifecycle-Maturing-007EC6)](https://github.com/bcgov/repomountie/blob/master/doc/lifecycle-badges.md)

This package is currently maintained by [Craig Hutton](https://craig.rbind.io/), a Data Scientist working with the Research Branch of the [British Columbia Ministry of Social Development & Poverty Reduction](https://www2.gov.bc.ca/gov/content/governments/organizational-structure/ministries-organizations/ministries/social-development-poverty-reduction).

## Why `elucidate`?

`elucidate` provides a collection of convenience functions to make exploratory data analysis in R easier and more accessible to researchers:

* Functions that help summarize data of multiple types (numeric, character strings, logicals, etc.) using descriptive statistics (`describe*`) split by any number of grouping variables with comparable performance to existing alternatives and enhanced customization via arguments.

* Functions that make it easier to access the power of the [boot](https://cran.r-project.org/web/packages/boot/index.html) package to obtain confidence intervals for a variety of summary statistics (`*_ci`), with options for within-group calculations and parallelized computation to maximize performance.

* Functions that help you visualize your data using the popular [ggplot2](https://ggplot2.tidyverse.org/) & [plotly](https://plot.ly/r/) packages more easily via a relatively simple API with sensible and well documented arguments rather than layers (`plot_*`). 

* Miscellaneous functions that fill in a few of the (rare) gaps in `R`'s statistical computing & data science toolkit, e.g. functions which are easy for experienced users to write on the fly but are challenging for `R` novices or researchers without programming experience to implement: the standard error of the mean (`se()`), an operator that returns the values that do not match a vector (`%ni%`, i.e. the opposite of `%in%`), the mode of a vector (`mode()`), etc.

Inspired by tidyverse naming conventions, the core functions of `elucidate` are organized into sets that begin with a common root (e.g. `describe*`, `plot_*`), since this enables the user to see them all as suggestions as you are coding in R studio.

Drawing from similar inspiration, many elucidate functions are also designed to accept a data object as the 1st argument and return a data or plotting object (e.g. ggplot2 or plotly) so they are compatible with the pipe operator from the [magrittr](https://magrittr.tidyverse.org/reference/pipe.html) package for easy integration into data processing pipelines. For convenience, the pipe operator is also imported when elucidate is loaded.

The `static_to_dynamic()` function converts a data frame into an interactive [datatable](https://rstudio.github.io/DT/) or [reactable](https://glin.github.io/reactable/articles/cookbook/cookbook.html) depending on sample size or preference. `static_to_dynamic()` also converts ggplot2 objects (including `plot_*` outputs) into interactive [plotly](https://plotly-r.com/) graphs.


## Installation

You can install the development version of elucidate from this repository with:

``` r
# use the remotes package to install from a github repository

install.packages("remotes") #only run this 1st if you haven't installed remotes before

remotes::install_github("bcgov/elucidate")
``` 

The authors of `elucidate` acknowledge and express their gratitude to the authors of the [tidyverse packages](https://www.tidyverse.org/), [data.table](https://github.com/Rdatatable/data.table), and the functions of other dependency packages which were used to build `elucidate`, since without their effort and ingenuity `elucidate` would mostly have remained a collection of ideas instead of functions. 

## Usage

Use `describe()` to describe a single variable in a data frame of vector of values:

```{r describe, cache = TRUE}
library(elucidate)

#using a numeric vector as input
describe(data = rnorm(1:1000, 100, 5))

```

To describe all variables in a data frame, use `describe_all()`:

```{r describe_all, cache = TRUE}
#if more than one class of variable is summarized you'll get a list
#if only one class is present in the data, or only one is requested, you'll get a dataframe

describe_all(pdata) #all summary types in a list, not split by any grouping variables

```


Only want to summarise certain variable classes? No problem, use the "class" argument.

Would you like a description for each level of a grouping variable? Just provide the unquoted name of the column to use for splitting.

```{r describe_all grouped, cache = TRUE}

pdata %>% 
  describe_all(high_low, #get a description for each level of the "high_low" column
               output = "dt", #you can ask for a tibble or data.table as output options
               class = "n") #describe numeric columns only

```

Calculate confidence intervals for a sample mean, median or other summary statistic using `describe_ci()`:

```{r describe_ci, cache = TRUE}
#confidence intervals for other statistics are obtained using bootstrapping
pdata[1:100, ] %>% 
  describe_ci(y1, stat = median) #bootstrapped median
```

Use the `plot_*` set of functions to easily generate customized ggplot2 visualizations:

```{r plot, cache = TRUE}
data(mtcars)

#customized density plot
mtcars %>% plot_density(x = mpg,
                        colour_var = cyl, #assign a variable to colour
                        colour_var_order = c("6", "8", "4"), #reorder the levels of the colour variable
                        colour_var_labs = c("six" = "6", "eight" = "8"), #recode the colour variable labels
                        colour_var_values = c("blue3", "red3", "green3"), #change the colours from the ggplot2 defaults
                        colour_var_title = "# cylinders")

#plot group means with SE error bars
mtcars %>% 
  plot_stat_error(y = mpg, x = cyl,
                  stat = "mean", error = "se",
                  alpha = 0.6, fill = "blue2")

```

These examples only highlight a few of the many things `elucidate` can do. Check out [this blog post](https://craig.rbind.io/post/2020-12-07-asgr-3-0-exploring-data-with-elucidate/) for a comprehensive guide. 


## Development Notes

`elucidate` is still in the formative stage of development and considerable changes may occur to it in the near future.

## Reporting an Issue

To report bugs/issues or request feature changes, open an [issue](https://github.com/bcgov/elucidate/issues) for the package GitHub repo. If raising an issue, *please provide a reproducible example* ([reprex](https://www.tidyverse.org/help/)) of the problem you're encountering.

## Requesting Features/Changes

To suggest changes or code improvements, please submit a [pull request](https://github.com/bcgov/elucidate/pulls).

## License

Copyright 2020 Province of British Columbia

Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License. You may obtain a copy of the License at

[http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0)

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.

